import Link from 'next/link';
import React, { useCallback, useRef, useState } from 'react';

import { useOnClickOutside } from '../../../../hooks/useOnClickOutside';

import s from './MembersMenu.module.scss';

export const MembersMenu = () => {
  const menuRef = useRef(null);
  const [open, setOpen] = useState(false);

  const handleClickOutside = useCallback(() => {
    setOpen(false);
  }, []);

  useOnClickOutside([menuRef], handleClickOutside);

  return (
    <div className={s.root}>
      <button className={s.trigger} onClick={() => setOpen(true)}>
        <MembersIcon /> Members <ChevronDownIcon />
      </button>
      {open && (
        <div className={s.menu} ref={menuRef}>
          <Link href="/members?filter=level1" passHref>
            <a className={s.menuItem}>
              <Level1Icon />
              <span className={s.menuItemLabel}>1 level</span>
              <span className={s.menuItemCount}>2</span>
              <CaretIcon />
            </a>
          </Link>

          <Link href="/members?filter=level0" passHref>
            <div className={s.menuItem}>
              <Level0Icon />
              <span className={s.menuItemLabel}>0 Level</span>
              <span className={s.menuItemCount}>2</span>
              <CaretIcon />
            </div>
          </Link>

          <Link href="/members?filter=level2" passHref>
            <div className={s.menuItem}>
              <Level2Icon />
              <span className={s.menuItemLabel}>2-4 Level</span>
              <span className={s.menuItemCount}>2</span>
              <CaretIcon />
            </div>
          </Link>

          <Link href="/members?filter=rejected" passHref>
            <div className={s.menuItem}>
              <RejectedIcon />
              <span className={s.menuItemLabel}>Rejected</span>
              <span className={s.menuItemCount}>2</span>
              <CaretIcon />
            </div>
          </Link>

          <button className={s.menuItem}>Add New Member</button>
        </div>
      )}
    </div>
  );
};

const MembersIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M18.0408 17.1874C17.9859 17.2825 17.907 17.3614 17.8119 17.4162C17.7169 17.4711 17.6091 17.5 17.4994 17.4999H2.49936C2.3897 17.4998 2.28201 17.4709 2.18708 17.416C2.09216 17.3611 2.01335 17.2821 1.95857 17.1872C1.90379 17.0922 1.87497 16.9844 1.875 16.8748C1.87503 16.7651 1.90391 16.6574 1.95873 16.5624C3.14858 14.5054 4.98217 13.0304 7.12202 12.3312C6.06355 11.7011 5.24119 10.7409 4.78122 9.59821C4.32126 8.45548 4.24911 7.19337 4.57588 6.00568C4.90264 4.81798 5.61023 3.77039 6.59 3.02378C7.56977 2.27716 8.76754 1.8728 9.99936 1.8728C11.2312 1.8728 12.4289 2.27716 13.4087 3.02378C14.3885 3.77039 15.0961 4.81798 15.4228 6.00568C15.7496 7.19337 15.6775 8.45548 15.2175 9.59821C14.7575 10.7409 13.9352 11.7011 12.8767 12.3312C15.0165 13.0304 16.8501 14.5054 18.04 16.5624C18.095 16.6574 18.124 16.7651 18.1241 16.8748C18.1242 16.9845 18.0955 17.0923 18.0408 17.1874Z"
      fill="#3D4A5C"
    />
  </svg>
);

const ChevronDownIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M16.9137 8.1633L10.6637 14.4133C10.5766 14.5007 10.4731 14.57 10.3592 14.6174C10.2452 14.6647 10.1231 14.689 9.99967 14.689C9.87628 14.689 9.75411 14.6647 9.64016 14.6174C9.5262 14.57 9.42271 14.5007 9.33561 14.4133L3.08561 8.1633C2.90949 7.98718 2.81055 7.74831 2.81055 7.49923C2.81055 7.25016 2.90949 7.01129 3.08561 6.83517C3.26173 6.65905 3.5006 6.56011 3.74967 6.56011C3.99874 6.56011 4.23762 6.65905 4.41374 6.83517L10.0005 12.4219L15.5872 6.83439C15.7633 6.65827 16.0022 6.55933 16.2512 6.55933C16.5003 6.55933 16.7392 6.65827 16.9153 6.83439C17.0914 7.01051 17.1904 7.24938 17.1904 7.49845C17.1904 7.74752 17.0914 7.9864 16.9153 8.16252L16.9137 8.1633Z"
      fill="#3D4A5C"
    />
  </svg>
);

const CaretIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" className={s.caret}>
    <path
      d="M11.5306 8.5306L6.5306 13.5306C6.3897 13.6715 6.19861 13.7506 5.99935 13.7506C5.80009 13.7506 5.60899 13.6715 5.4681 13.5306C5.3272 13.3897 5.24805 13.1986 5.24805 12.9993C5.24805 12.8001 5.3272 12.609 5.4681 12.4681L9.93747 7.99997L5.46935 3.5306C5.39958 3.46083 5.34424 3.37801 5.30649 3.28686C5.26873 3.19571 5.2493 3.09801 5.2493 2.99935C5.2493 2.90069 5.26873 2.80299 5.30649 2.71184C5.34424 2.62069 5.39958 2.53786 5.46935 2.4681C5.53911 2.39833 5.62194 2.34299 5.71309 2.30524C5.80424 2.26748 5.90194 2.24805 6.0006 2.24805C6.09926 2.24805 6.19696 2.26748 6.28811 2.30524C6.37926 2.34299 6.46208 2.39833 6.53185 2.4681L11.5318 7.4681C11.6017 7.53786 11.6571 7.62072 11.6948 7.71193C11.7326 7.80313 11.7519 7.9009 11.7518 7.99961C11.7517 8.09832 11.7321 8.19604 11.6941 8.28715C11.6562 8.37827 11.6006 8.461 11.5306 8.5306Z"
      fill="#8897AE"
    />
  </svg>
);

const Level0Icon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M17.1626 9.16088C17.1275 9.01073 17.0558 8.87157 16.954 8.75574C16.8522 8.6399 16.7234 8.55097 16.579 8.49681L12.3259 6.90228L13.4196 1.43353C13.4596 1.23352 13.4333 1.02593 13.3446 0.842238C13.256 0.658548 13.1098 0.508784 12.9283 0.415663C12.7469 0.322542 12.54 0.291145 12.3391 0.326233C12.1381 0.361322 11.9541 0.460982 11.815 0.610097L3.06496 9.9851C2.95968 10.0978 2.88383 10.2347 2.84412 10.3837C2.80441 10.5327 2.80207 10.6892 2.8373 10.8393C2.87253 10.9894 2.94425 11.1286 3.0461 11.2443C3.14796 11.3601 3.2768 11.449 3.42121 11.5031L7.67433 13.0976L6.58058 18.5663C6.5406 18.7664 6.56693 18.974 6.6556 19.1576C6.74426 19.3413 6.89041 19.4911 7.07188 19.5842C7.25335 19.6773 7.46024 19.7087 7.66117 19.6736C7.8621 19.6386 8.0461 19.5389 8.18527 19.3898L16.9353 10.0148C17.0404 9.90211 17.1162 9.76524 17.1559 9.6163C17.1955 9.46735 17.1978 9.31093 17.1626 9.16088ZM9.06652 15.6976L9.66964 12.6835C9.71327 12.4653 9.6778 12.2386 9.56959 12.0441C9.46138 11.8495 9.28748 11.6999 9.07902 11.6218L5.39074 10.2398L10.9321 4.30228L10.329 7.31635C10.2854 7.53463 10.3209 7.7613 10.4291 7.95583C10.5373 8.15035 10.7112 8.30002 10.9196 8.37807L14.6095 9.7601L9.06652 15.6976Z"
      fill="#455468"
    />
  </svg>
);

const Level1Icon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M10.9375 2.5V5C10.9375 5.24864 10.8387 5.4871 10.6629 5.66291C10.4871 5.83873 10.2486 5.9375 10 5.9375C9.75136 5.9375 9.5129 5.83873 9.33709 5.66291C9.16127 5.4871 9.0625 5.24864 9.0625 5V2.5C9.0625 2.25136 9.16127 2.0129 9.33709 1.83709C9.5129 1.66127 9.75136 1.5625 10 1.5625C10.2486 1.5625 10.4871 1.66127 10.6629 1.83709C10.8387 2.0129 10.9375 2.25136 10.9375 2.5ZM17.5 9.0625H15C14.7514 9.0625 14.5129 9.16127 14.3371 9.33709C14.1613 9.5129 14.0625 9.75136 14.0625 10C14.0625 10.2486 14.1613 10.4871 14.3371 10.6629C14.5129 10.8387 14.7514 10.9375 15 10.9375H17.5C17.7486 10.9375 17.9871 10.8387 18.1629 10.6629C18.3387 10.4871 18.4375 10.2486 18.4375 10C18.4375 9.75136 18.3387 9.5129 18.1629 9.33709C17.9871 9.16127 17.7486 9.0625 17.5 9.0625ZM14.1984 12.8727C14.1112 12.7855 14.0077 12.7163 13.8938 12.6691C13.7798 12.6219 13.6577 12.5976 13.5344 12.5976C13.411 12.5976 13.2889 12.6219 13.175 12.6691C13.061 12.7163 12.9575 12.7855 12.8703 12.8727C12.7831 12.9599 12.7139 13.0634 12.6667 13.1773C12.6195 13.2913 12.5952 13.4134 12.5952 13.5367C12.5952 13.66 12.6195 13.7822 12.6667 13.8961C12.7139 14.01 12.7831 14.1136 12.8703 14.2008L14.6383 15.9688C14.8144 16.1449 15.0533 16.2438 15.3023 16.2438C15.5514 16.2438 15.7903 16.1449 15.9664 15.9688C16.1425 15.7926 16.2415 15.5538 16.2415 15.3047C16.2415 15.0556 16.1425 14.8167 15.9664 14.6406L14.1984 12.8727ZM10 14.0625C9.75136 14.0625 9.5129 14.1613 9.33709 14.3371C9.16127 14.5129 9.0625 14.7514 9.0625 15V17.5C9.0625 17.7486 9.16127 17.9871 9.33709 18.1629C9.5129 18.3387 9.75136 18.4375 10 18.4375C10.2486 18.4375 10.4871 18.3387 10.6629 18.1629C10.8387 17.9871 10.9375 17.7486 10.9375 17.5V15C10.9375 14.7514 10.8387 14.5129 10.6629 14.3371C10.4871 14.1613 10.2486 14.0625 10 14.0625ZM5.80156 12.8727L4.03359 14.6406C3.85747 14.8167 3.75853 15.0556 3.75853 15.3047C3.75853 15.5538 3.85747 15.7926 4.03359 15.9688C4.20971 16.1449 4.44858 16.2438 4.69766 16.2438C4.94673 16.2438 5.1856 16.1449 5.36172 15.9688L7.12969 14.2008C7.30581 14.0247 7.40475 13.7858 7.40475 13.5367C7.40475 13.2876 7.30581 13.0488 7.12969 12.8727C6.95357 12.6965 6.7147 12.5976 6.46563 12.5976C6.21655 12.5976 5.97768 12.6965 5.80156 12.8727ZM5.9375 10C5.9375 9.75136 5.83873 9.5129 5.66291 9.33709C5.4871 9.16127 5.24864 9.0625 5 9.0625H2.5C2.25136 9.0625 2.0129 9.16127 1.83709 9.33709C1.66127 9.5129 1.5625 9.75136 1.5625 10C1.5625 10.2486 1.66127 10.4871 1.83709 10.6629C2.0129 10.8387 2.25136 10.9375 2.5 10.9375H5C5.24864 10.9375 5.4871 10.8387 5.66291 10.6629C5.83873 10.4871 5.9375 10.2486 5.9375 10ZM5.35938 4.03359C5.18325 3.85747 4.94438 3.75853 4.69531 3.75853C4.44624 3.75853 4.20737 3.85747 4.03125 4.03359C3.85513 4.20971 3.75619 4.44858 3.75619 4.69766C3.75619 4.94673 3.85513 5.1856 4.03125 5.36172L5.80156 7.12734C5.97768 7.30346 6.21655 7.40241 6.46563 7.40241C6.7147 7.40241 6.95357 7.30346 7.12969 7.12734C7.30581 6.95122 7.40475 6.71235 7.40475 6.46328C7.40475 6.21421 7.30581 5.97534 7.12969 5.79922L5.35938 4.03359Z"
      fill="#3D4A5C"
    />
  </svg>
);

const Level2Icon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M17.8711 7.81641C17.5961 7.52969 17.3125 7.23359 17.2195 7.00938C17.1367 6.80938 17.1305 6.39766 17.125 6.03516C17.1133 5.25391 17.0984 4.28203 16.4078 3.59219C15.7172 2.90234 14.7461 2.88906 13.9648 2.875C13.6023 2.86953 13.1906 2.86328 12.9906 2.78047C12.7664 2.6875 12.4703 2.40391 12.1836 2.12891C11.6305 1.59844 10.9414 0.9375 10 0.9375C9.05859 0.9375 8.36953 1.59844 7.81641 2.12891C7.52969 2.40391 7.23359 2.6875 7.00938 2.78047C6.80938 2.86328 6.39766 2.86953 6.03516 2.875C5.25391 2.89062 4.28203 2.90156 3.59375 3.59375C2.90547 4.28594 2.89062 5.25391 2.875 6.03516C2.86953 6.39766 2.86328 6.80938 2.78047 7.00938C2.6875 7.23359 2.40391 7.52969 2.12891 7.81641C1.59844 8.36953 0.9375 9.0625 0.9375 10C0.9375 10.9375 1.59844 11.6305 2.12891 12.1875C2.40391 12.4742 2.6875 12.7703 2.78047 12.9945C2.86328 13.1945 2.86953 13.6062 2.875 13.9688C2.88672 14.75 2.90156 15.7219 3.59219 16.4117C4.28281 17.1016 5.25391 17.1148 6.03516 17.1289C6.39766 17.1344 6.80938 17.1406 7.00938 17.2234C7.23359 17.3164 7.52969 17.6 7.81641 17.875C8.36953 18.4016 9.0625 19.0625 10 19.0625C10.9375 19.0625 11.6305 18.4016 12.1836 17.8711C12.4703 17.5961 12.7664 17.3125 12.9906 17.2195C13.1906 17.1367 13.6023 17.1305 13.9648 17.125C14.7461 17.1133 15.718 17.0984 16.4078 16.4078C17.0977 15.7172 17.1109 14.7461 17.125 13.9648C17.1305 13.6023 17.1367 13.1906 17.2195 12.9906C17.3125 12.7664 17.5961 12.4703 17.8711 12.1836C18.4016 11.6305 19.0625 10.9414 19.0625 10C19.0625 9.05859 18.4016 8.36953 17.8711 7.81641ZM16.518 10.8859C16.1414 11.2766 15.7148 11.7234 15.4875 12.2734C15.2672 12.8047 15.2586 13.3797 15.2531 13.9367C15.2469 14.3555 15.2383 14.9297 15.0852 15.082C14.932 15.2344 14.3586 15.2437 13.9398 15.25C13.3828 15.2586 12.8078 15.2672 12.2766 15.4844C11.7297 15.7117 11.282 16.1383 10.8891 16.5148C10.6078 16.7844 10.1875 17.1875 10 17.1875C9.8125 17.1875 9.39219 16.7844 9.11406 16.518C8.72344 16.1414 8.27656 15.7148 7.72656 15.4875C7.19531 15.2672 6.62031 15.2586 6.06328 15.2531C5.64453 15.2469 5.07031 15.2383 4.91797 15.0852C4.76562 14.932 4.75625 14.3586 4.75 13.9398C4.74141 13.3828 4.73281 12.8078 4.51562 12.2766C4.28828 11.7297 3.86172 11.282 3.48516 10.8891C3.21563 10.6078 2.8125 10.1875 2.8125 10C2.8125 9.8125 3.21563 9.39219 3.48203 9.11406C3.85859 8.72344 4.28516 8.27656 4.5125 7.72656C4.73281 7.19531 4.74141 6.62031 4.74687 6.06328C4.75625 5.64453 4.76562 5.07031 4.92188 4.92188C5.07812 4.77344 5.64844 4.76016 6.06719 4.75391C6.62422 4.74531 7.19922 4.73672 7.73047 4.51953C8.27734 4.29219 8.725 3.86562 9.11797 3.48906C9.39219 3.21563 9.8125 2.8125 10 2.8125C10.1875 2.8125 10.6078 3.21563 10.8859 3.48203C11.2766 3.85859 11.7234 4.28516 12.2734 4.5125C12.8047 4.73281 13.3797 4.74141 13.9367 4.74687C14.3555 4.75312 14.9297 4.76172 15.082 4.91484C15.2344 5.06797 15.2437 5.64141 15.25 6.06016C15.2586 6.61719 15.2672 7.19219 15.4844 7.72344C15.7117 8.27031 16.1383 8.71797 16.5148 9.11094C16.7812 9.38906 17.1844 9.80937 17.1844 9.99687C17.1844 10.1844 16.7844 10.6078 16.518 10.8859ZM13.7883 7.46172C13.8757 7.54882 13.945 7.65231 13.9923 7.76626C14.0397 7.88022 14.064 8.00239 14.064 8.12578C14.064 8.24917 14.0397 8.37134 13.9923 8.4853C13.945 8.59925 13.8757 8.70275 13.7883 8.78984L9.41328 13.1648C9.32618 13.2522 9.22269 13.3216 9.10874 13.3689C8.99478 13.4162 8.87261 13.4406 8.74922 13.4406C8.62583 13.4406 8.50366 13.4162 8.3897 13.3689C8.27575 13.3216 8.17225 13.2522 8.08516 13.1648L6.21016 11.2898C6.12295 11.2026 6.05377 11.0991 6.00658 10.9852C5.95938 10.8712 5.93509 10.7491 5.93509 10.6258C5.93509 10.5025 5.95938 10.3803 6.00658 10.2664C6.05377 10.1525 6.12295 10.0489 6.21016 9.96172C6.29736 9.87451 6.40089 9.80534 6.51483 9.75814C6.62877 9.71095 6.75089 9.68666 6.87422 9.68666C6.99755 9.68666 7.11967 9.71095 7.23361 9.75814C7.34755 9.80534 7.45108 9.87451 7.53828 9.96172L8.75 11.1719L12.4617 7.45938C12.5489 7.37236 12.6525 7.3034 12.7664 7.25642C12.8802 7.20944 13.0023 7.18537 13.1255 7.18559C13.2487 7.18581 13.3706 7.21031 13.4844 7.25769C13.5981 7.30507 13.7014 7.3744 13.7883 7.46172Z"
      fill="#455468"
    />
  </svg>
);

const RejectedIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M16.875 3.75H14.0625V2.8125C14.0625 2.23234 13.832 1.67594 13.4218 1.2657C13.0116 0.855468 12.4552 0.625 11.875 0.625H8.125C7.54484 0.625 6.98844 0.855468 6.5782 1.2657C6.16797 1.67594 5.9375 2.23234 5.9375 2.8125V3.75H3.125C2.87636 3.75 2.6379 3.84877 2.46209 4.02459C2.28627 4.2004 2.1875 4.43886 2.1875 4.6875C2.1875 4.93614 2.28627 5.1746 2.46209 5.35041C2.6379 5.52623 2.87636 5.625 3.125 5.625H3.4375V16.25C3.4375 16.6644 3.60212 17.0618 3.89515 17.3549C4.18817 17.6479 4.5856 17.8125 5 17.8125H15C15.4144 17.8125 15.8118 17.6479 16.1049 17.3549C16.3979 17.0618 16.5625 16.6644 16.5625 16.25V5.625H16.875C17.1236 5.625 17.3621 5.52623 17.5379 5.35041C17.7137 5.1746 17.8125 4.93614 17.8125 4.6875C17.8125 4.43886 17.7137 4.2004 17.5379 4.02459C17.3621 3.84877 17.1236 3.75 16.875 3.75ZM7.8125 2.8125C7.8125 2.72962 7.84542 2.65013 7.90403 2.59153C7.96263 2.53292 8.04212 2.5 8.125 2.5H11.875C11.9579 2.5 12.0374 2.53292 12.096 2.59153C12.1546 2.65013 12.1875 2.72962 12.1875 2.8125V3.75H7.8125V2.8125ZM14.6875 15.9375H5.3125V5.625H14.6875V15.9375ZM9.0625 8.125V13.125C9.0625 13.3736 8.96373 13.6121 8.78791 13.7879C8.6121 13.9637 8.37364 14.0625 8.125 14.0625C7.87636 14.0625 7.6379 13.9637 7.46209 13.7879C7.28627 13.6121 7.1875 13.3736 7.1875 13.125V8.125C7.1875 7.87636 7.28627 7.6379 7.46209 7.46209C7.6379 7.28627 7.87636 7.1875 8.125 7.1875C8.37364 7.1875 8.6121 7.28627 8.78791 7.46209C8.96373 7.6379 9.0625 7.87636 9.0625 8.125ZM12.8125 8.125V13.125C12.8125 13.3736 12.7137 13.6121 12.5379 13.7879C12.3621 13.9637 12.1236 14.0625 11.875 14.0625C11.6264 14.0625 11.3879 13.9637 11.2121 13.7879C11.0363 13.6121 10.9375 13.3736 10.9375 13.125V8.125C10.9375 7.87636 11.0363 7.6379 11.2121 7.46209C11.3879 7.28627 11.6264 7.1875 11.875 7.1875C12.1236 7.1875 12.3621 7.28627 12.5379 7.46209C12.7137 7.6379 12.8125 7.87636 12.8125 8.125Z"
      fill="#455468"
    />
  </svg>
);
