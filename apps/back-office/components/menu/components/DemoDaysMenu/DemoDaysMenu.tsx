import Link from 'next/link';
import React, { useRef, useState } from 'react';

import { useOnClickOutside } from '../../../../hooks/useOnClickOutside';

import s from './DemoDaysMenu.module.scss';
import { clsx } from 'clsx';

export const DemoDaysMenu = () => {
  const menuRef = useRef(null);
  const [open, setOpen] = useState(false);

  useOnClickOutside([menuRef], () => setOpen(false));

  return (
    <div className={s.root} onMouseEnter={() => setOpen(true)} onMouseLeave={() => setOpen(false)}>
      <button className={s.trigger}>
        <DemoDaysIcon />
        <span>Demo Days</span>
        <span
          className={clsx(s.chevron, {
            [s.open]: open,
          })}
        >
          <ChevronDownIcon />
        </span>
      </button>
      <div ref={menuRef} className={`${s.menu} ${open ? s.open : ''}`}>
        <Link href="/demo-days" passHref>
          <a className={s.menuItem}>
            <DemoDaysIcon />
            <span className={s.menuItemLabel}>Demo Days</span>
            <CaretIcon />
          </a>
        </Link>

        <Link href="/demo-days/subscribers" passHref>
          <a className={s.menuItem}>
            <SubscribersIcon />
            <span className={s.menuItemLabel}>Subscribers</span>
            <CaretIcon />
          </a>
        </Link>
      </div>
    </div>
  );
};

const DemoDaysIcon = () => (
  <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g filter="url(#filter0_d_7389_22217)">
      <path
        d="M15.625 2.96875H14.2188V2.6875C14.2188 2.46372 14.1299 2.24911 13.9716 2.09088C13.8134 1.93264 13.5988 1.84375 13.375 1.84375C13.1512 1.84375 12.9366 1.93264 12.7784 2.09088C12.6201 2.24911 12.5312 2.46372 12.5312 2.6875V2.96875H7.46875V2.6875C7.46875 2.46372 7.37986 2.24911 7.22162 2.09088C7.06339 1.93264 6.84878 1.84375 6.625 1.84375C6.40122 1.84375 6.18661 1.93264 6.02838 2.09088C5.87014 2.24911 5.78125 2.46372 5.78125 2.6875V2.96875H4.375C4.00204 2.96875 3.64435 3.11691 3.38063 3.38063C3.11691 3.64435 2.96875 4.00204 2.96875 4.375V15.625C2.96875 15.998 3.11691 16.3556 3.38063 16.6194C3.64435 16.8831 4.00204 17.0312 4.375 17.0312H15.625C15.998 17.0312 16.3556 16.8831 16.6194 16.6194C16.8831 16.3556 17.0312 15.998 17.0312 15.625V4.375C17.0312 4.00204 16.8831 3.64435 16.6194 3.38063C16.3556 3.11691 15.998 2.96875 15.625 2.96875ZM15.3438 15.3438H4.65625V4.65625H5.78125C5.78125 4.88003 5.87014 5.09464 6.02838 5.25287C6.18661 5.41111 6.40122 5.5 6.625 5.5C6.84878 5.5 7.06339 5.41111 7.22162 5.25287C7.37986 5.09464 7.46875 4.88003 7.46875 4.65625H12.5312C12.5312 4.88003 12.6201 5.09464 12.7784 5.25287C12.9366 5.41111 13.1512 5.5 13.375 5.5C13.5988 5.5 13.8134 5.41111 13.9716 5.25287C14.1299 5.09464 14.2188 4.88003 14.2188 4.65625H15.3438V15.3438ZM13.4397 8.70977L11.5117 8.5607L10.7734 6.85352C10.7078 6.70297 10.5997 6.57486 10.4623 6.48488C10.3249 6.3949 10.1642 6.34697 10 6.34697C9.83577 6.34697 9.67511 6.3949 9.53773 6.48488C9.40034 6.57486 9.2922 6.70297 9.22656 6.85352L8.48828 8.5607L6.56031 8.70977C6.39257 8.72264 6.23251 8.78536 6.10069 8.88987C5.96886 8.99439 5.87128 9.13593 5.82049 9.29631C5.7697 9.45669 5.76802 9.62859 5.81565 9.78994C5.86328 9.95129 5.95806 10.0947 6.08781 10.2018L7.53484 11.3971L7.09539 13.1732C7.05564 13.3344 7.06431 13.5037 7.12031 13.6599C7.17631 13.8162 7.27716 13.9525 7.41023 14.0517C7.5433 14.1509 7.70269 14.2087 7.86843 14.2178C8.03418 14.2268 8.19892 14.1868 8.34203 14.1027L10 13.1261L11.658 14.102C11.8011 14.1861 11.9658 14.2261 12.1316 14.2171C12.2973 14.208 12.4567 14.1502 12.5898 14.051C12.7228 13.9518 12.8237 13.8155 12.8797 13.6592C12.9357 13.503 12.9444 13.3337 12.9046 13.1725L12.4652 11.3964L13.9122 10.2011C14.0419 10.094 14.1367 9.95059 14.1844 9.78924C14.232 9.62789 14.2303 9.45599 14.1795 9.29561C14.1287 9.13522 14.0311 8.99369 13.8993 8.88917C13.7675 8.78466 13.6074 8.72193 13.4397 8.70906V8.70977ZM10.9787 10.4331C10.8563 10.5344 10.765 10.6682 10.7152 10.819C10.6655 10.9699 10.6593 11.1318 10.6975 11.286L10.7826 11.6298L10.4261 11.4189C10.2962 11.3429 10.1484 11.3028 9.99789 11.3028C9.84739 11.3028 9.69959 11.3429 9.56969 11.4189L9.2132 11.6298L9.29828 11.286C9.33646 11.1318 9.33031 10.9699 9.28056 10.819C9.2308 10.6682 9.13945 10.5344 9.01703 10.4331L8.77305 10.2313L9.12461 10.2039C9.27782 10.192 9.42487 10.1385 9.5499 10.0492C9.67493 9.95984 9.77318 9.83805 9.83406 9.69695L9.99789 9.31727L10.1617 9.69695C10.2226 9.83805 10.3209 9.95984 10.4459 10.0492C10.5709 10.1385 10.718 10.192 10.8712 10.2039L11.2227 10.2313L10.9787 10.4331Z"
        fill="#455468"
      />
    </g>
    <defs>
      <filter
        id="filter0_d_7389_22217"
        x="-1"
        y="0"
        width="22"
        height="22"
        filterUnits="userSpaceOnUse"
        colorInterpolationFilters="sRGB"
      >
        <feFlood floodOpacity="0" result="BackgroundImageFix" />
        <feColorMatrix
          in="SourceAlpha"
          type="matrix"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
          result="hardAlpha"
        />
        <feOffset dy="1" />
        <feGaussianBlur stdDeviation="1" />
        <feComposite in2="hardAlpha" operator="out" />
        <feColorMatrix type="matrix" values="0 0 0 0 0.054902 0 0 0 0 0.0588235 0 0 0 0 0.0666667 0 0 0 0.06 0" />
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_7389_22217" />
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_7389_22217" result="shape" />
      </filter>
    </defs>
  </svg>
);

const ChevronDownIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M16.9137 8.1633L10.6637 14.4133C10.5766 14.5007 10.4731 14.57 10.3592 14.6174C10.2452 14.6647 10.1231 14.689 9.99967 14.689C9.87628 14.689 9.75411 14.6647 9.64016 14.6174C9.5262 14.57 9.42271 14.5007 9.33561 14.4133L3.08561 8.1633C2.90949 7.98718 2.81055 7.74831 2.81055 7.49923C2.81055 7.25016 2.90949 7.01129 3.08561 6.83517C3.26173 6.65905 3.5006 6.56011 3.74967 6.56011C3.99874 6.56011 4.23762 6.65905 4.41374 6.83517L10.0005 12.4219L15.5872 6.83439C15.7633 6.65827 16.0022 6.55933 16.2512 6.55933C16.5003 6.55933 16.7392 6.65827 16.9153 6.83439C17.0914 7.01051 17.1904 7.24938 17.1904 7.49845C17.1904 7.74752 17.0914 7.9864 16.9153 8.16252L16.9137 8.1633Z"
      fill="#3D4A5C"
    />
  </svg>
);

const CaretIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" className={s.caret}>
    <path
      d="M11.5306 8.5306L6.5306 13.5306C6.3897 13.6715 6.19861 13.7506 5.99935 13.7506C5.80009 13.7506 5.60899 13.6715 5.4681 13.5306C5.3272 13.3897 5.24805 13.1986 5.24805 12.9993C5.24805 12.8001 5.3272 12.609 5.4681 12.4681L9.93747 7.99997L5.46935 3.5306C5.39958 3.46083 5.34424 3.37801 5.30649 3.28686C5.26873 3.19571 5.2493 3.09801 5.2493 2.99935C5.2493 2.90069 5.26873 2.80299 5.30649 2.71184C5.34424 2.62069 5.39958 2.53786 5.46935 2.4681C5.53911 2.39833 5.62194 2.34299 5.71309 2.30524C5.80424 2.26748 5.90194 2.24805 6.0006 2.24805C6.09926 2.24805 6.19696 2.26748 6.28811 2.30524C6.37926 2.34299 6.46208 2.39833 6.53185 2.4681L11.5318 7.4681C11.6017 7.53786 11.6571 7.62072 11.6948 7.71193C11.7326 7.80313 11.7519 7.9009 11.7518 7.99961C11.7517 8.09832 11.7321 8.19604 11.6941 8.28715C11.6562 8.37827 11.6006 8.461 11.5306 8.5306Z"
      fill="#8897AE"
    />
  </svg>
);

const SubscribersIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M10 10C12.7614 10 15 7.76142 15 5C15 2.23858 12.7614 0 10 0C7.23858 0 5 2.23858 5 5C5 7.76142 7.23858 10 10 10ZM10 12.5C6.6625 12.5 0 14.175 0 17.5V20H20V17.5C20 14.175 13.3375 12.5 10 12.5Z"
      fill="#455468"
    />
  </svg>
);
